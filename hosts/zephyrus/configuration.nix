# hosts/zephyrus/configuration.nix
# =============================================================================
# Host entry point for Zephyrus
#
# Imports shared modules from ../../modules and applies small per-machine
# overrides (hostname, trims, etc.). Keep this file thin; push reusable
# logic into modules.
# =============================================================================
{ stateVersion, lib, hostName, ... }:

{
  ##########################################
  ## Module imports (shared + host-specific)
  ##########################################
  imports = [
    # Hardware profile generated by `nixos-generate-config`
    ./hardware-configuration.nix

    # --- Core system ---
    ../../modules/boot.nix          # bootloader/kernel params
    ../../modules/users.nix         # users/groups/shells
    ../../modules/network.nix       # NetworkManager, firewall, hosts, tools
    ../../modules/nix.nix           # Nix daemon, flakes, GC/optimizations
    ../../modules/sysenv.nix        # locale/time/XKB, CLI baseline, env

    # --- Desktop & UX ---
    ../../modules/hyprland.nix      # Hyprland on Wayland
    ../../modules/portals.nix       # XDG portals (Hyprland + GTK backends)
    ../../modules/multimedia.nix    # PipeWire/ALSA, codecs, media tools

    # --- Services ---
    ../../modules/services.nix      # SSH, journald, PPD, timesyncd, keyring

    # --- Apps / Stacks ---
    ../../modules/games.nix         # Steam/Lutris/Heroic, Proton, Wine, tools
    ../../modules/office.nix        # LibreOffice + hunspell + LanguageTool
    ../../modules/mtp.nix           # Android MTP (libmtp + udev rules)

    # Virtualization (US spelling â€” adjust if your file is named differently)
    ../../modules/virtualization.nix

    ../../modules/filesystems.nix 
    # Optional extras (uncomment when present)
    # ../../modules/maintenance.nix        # zram, fwupd, rtkit, microcode, fstrim
    # ../../modules/security-hardening.nix # sysctls, basic net hardening
    # ../../modules/thumbnails.nix         # Tumbler + previewers for Thunar
    # ../../modules/bluetooth.nix          # BlueZ + Blueman
    # ../../modules/devtools.nix           # direnv + nix-direnv
    # ../../modules/printing-scanning.nix  # CUPS, ipp-usb, SANE
    
    # Graphics applications
    ../../modules/graphics-apps.nix
  ];

  ##########################################
  ## Host-level overrides
  ##########################################
  # Hostname comes from flake specialArgs; keep imports host-agnostic.
  networking.hostName = lib.mkDefault hostName;

  # Weekly SSD TRIM (safe default for modern SSDs).
  services.fstrim.enable = lib.mkDefault true;

  # Microcode (pick the correct vendor; or enable both via maintenance.nix)
  # hardware.cpu.intel.updateMicrocode = lib.mkDefault true;
  # hardware.cpu.amd.updateMicrocode   = lib.mkDefault true;

  # Optional compressed RAM swap (nice for laptops)
  # zramSwap = { enable = lib.mkDefault true; memoryPercent = lib.mkDefault 25; };

  # Optional Bluetooth default
  # hardware.bluetooth.enable = lib.mkDefault true;

  ##########################################
  ## System state version
  ##########################################
  system.stateVersion = stateVersion;
}

